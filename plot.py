import matplotlib.pyplot as plt

with plt.style.context("default"):
    x_matrix = [64, 128, 256, 512, 768, 1024, 1536, 2048, 3072, 4096, 6144, 8192, 10240]
    # Time for 32 threads on the matrix dimension
    plt.xlabel("Matrix dimension (n x n)")
    plt.ylabel("Time (usec)")
    y_seq = [
        5892.7,
        24783.3,
        100357.1,
        412923.0,
        933336.6,
        1682170.1,
        4008780.2,
        7653772.8,
        18216012.2,
        32685202.8,
        73092483.2,
        128981811.0,
        199516210.0,
    ]
    y_std = [
        158564.7,
        162266.6,
        140596.3,
        183522.4,
        262537.5,
        352015.8,
        549335.4,
        896071.7,
        2100667.1,
        3065816.3,
        6438691.2,
        11144175.8,
        18498310.6,
    ]
    y_ff = [
        218625.6,
        210239.9,
        192431.0,
        217101.1,
        287636.7,
        325227.5,
        507358.6,
        750014.9,
        2022620.2,
        3010943.1,
        6334165.8,
        10938243.3,
        16161148.1,
    ]
    plt.plot(x_matrix, y_seq, "k", label="Sequential")
    plt.plot(x_matrix, y_std, "k:", label="STD Threads")
    plt.plot(x_matrix, y_ff, "k--", label="FastFlow")
    plt.legend(loc="upper left")
    plt.show()

    # Speedup for 32 threads on the matrix dimension
    plt.xlabel("Matrix dimension (n x n)")
    plt.ylabel("Speedup")
    y_std_sp = [
        0.037309930000000005,
        0.1542122,
        0.7168151,
        2.2591170000000003,
        3.5635660000000002,
        4.788708,
        7.303125999999999,
        8.647705000000002,
        8.786372,
        10.693274,
        11.35834,
        11.57404,
        10.788900000000002,
    ]
    y_ff_sp = [
        0.0272694,
        0.11847060000000001,
        0.5260475,
        1.9085999999999999,
        3.2868540000000004,
        5.242857,
        7.98322,
        10.280169,
        9.114547,
        10.896365,
        11.54478,
        11.79827,
        12.357020000000002,
    ]
    plt.plot(x_matrix, y_std_sp, "k:", label="STD Threads speedup")
    plt.plot(x_matrix, y_ff_sp, "k--", label="FastFlow speedup")
    plt.legend(loc="upper left")
    plt.show()

    # Time for matrix of 1024x1024 on growing number of threads
    x_nw = list(range(1, 33))
    plt.xlabel("Number of workers")
    plt.ylabel("Time (usec)")
    y_seq = [1660330.0, 1656590.0, 1663799.0, 1665565.0, 1661038.0, 1658070.0, 1660655.0, 1659973.0, 1661303.0, 1657206.0, 1658472.0, 1668066.0, 1670883.0, 1659580.0, 1660610.0, 1656756.0, 1659734.0, 1658689.0, 1659578.0, 1660404.0, 1667297.0, 1663300.0, 1656536.0, 1668839.0, 1659672.0, 1671631.0, 1666235.0, 1663193.0, 1666990.0, 1665872.0, 1668206.0, 1660824.0]
    y_std = [1775191.0, 962301.8, 704064.9, 565209.6, 455688.9, 398240.8, 344849.5, 318660.7, 292274.0, 282348.6, 270766.5, 283605.7, 281556.7, 229492.6, 230255.3, 228381.1, 222777.7, 207200.8, 228103.4, 247973.8, 312095.9, 285731.4, 278775.5, 301349.0, 337272.9, 411238.4, 388253.3, 404838.9, 414873.9, 448484.4, 467125.7, 589907.6]
    y_ff = [1676874.1, 953668.1, 662897.6, 511492.4, 415920.7, 370629.4, 362121.5, 306120.0, 294288.1, 294846.4, 293927.6, 298336.7, 295828.6, 263907.1, 250993.2, 251625.3, 235192.7, 236151.0, 251444.1, 273811.4, 336029.7, 294711.4, 320641.2, 369162.4, 432393.1, 537407.4, 444880.5, 546776.7, 698759.1, 723748.1, 818577.1, 970249.6]
    plt.plot(x_nw, y_seq, "k", label="Sequential")
    plt.plot(x_nw, y_std, "k:", label="STD Threads")
    plt.plot(x_nw, y_ff, "k--", label="FastFlow")
    plt.legend(loc="upper left")
    plt.show()

    # Speedup for matrix of 1024x1024 on growing number of threads
    plt.xlabel("Number of workers")
    plt.ylabel("Speedup")
    y_std_sp = [0.9352965399216197, 1.7214869597043254, 2.363133000949202, 2.9468094667889577, 3.6451140240633464, 4.163486011478483, 4.815593469035043, 5.209217829497017, 5.684060162724019, 5.869361491432931, 6.125100409393333, 5.881637780904968, 5.9344458860329015, 7.231518576198099, 7.212038115952163, 7.254348104987672, 7.450180157170129, 8.00522488330161, 7.275551350834753, 6.6958848071852755, 5.342258581416801, 5.821201310041528, 5.942186454692037, 5.537894600612579, 4.9208578572426065, 4.0648708875435755, 4.291618384183727, 4.108283566623662, 4.0180642841113885, 3.714448038772363, 3.571214343376954, 2.8153968519815646]
    y_ff_sp = [0.990133964141971, 1.7370718387246045, 2.509888405087, 3.2562849418681488, 3.9936410955261423, 4.473660211521266, 4.58590555932194, 5.422621847641448, 5.645158604782185, 5.620573966648397, 5.642450725961088, 5.591219585119766, 5.6481455815969115, 6.288500764094638, 6.616155338072904, 6.5842186775336184, 7.0569112051522005, 7.023849147367574, 6.600186681652104, 6.0640426220383805, 4.961754868691666, 5.6438264688776885, 5.166322980328167, 4.520609357832758, 3.8383406210691153, 3.1105470449420682, 3.74535408946897, 3.04181396171417, 2.3856433497610263, 2.3017290131746115, 2.0379338733028325, 1.7117492241171757]
    plt.plot(x_nw, y_std_sp, "k:", label="STD Threads speedup")
    plt.plot(x_nw, y_ff_sp, "k--", label="FastFlow speedup")
    plt.legend(loc="upper left")
    plt.show()

    # Scalability for matrix of 1024x1024 on growing number of threads
    plt.xlabel("Number of workers")
    plt.ylabel("Scalability")
    y_std_sc = [1.0, 1.8447341572051512, 2.5213456884443466, 3.1407658327105556, 3.8956204550955706, 4.457581945395851, 5.147726761964277, 5.5707873609767375, 6.073721918473761, 6.287231457850331, 6.5561692454568785, 6.259362911253194, 6.304914782706289, 7.735286453680859, 7.709664012077029, 7.772933049188396, 7.968441185989441, 8.5674910521581, 7.782396053719498, 7.158784516751367, 5.687966423141091, 6.212796353498425, 6.367815679641862, 5.890814305008479, 5.263366846254176, 4.3166956198642925, 4.5722496112718165, 4.384931882781027, 4.278868832192143, 3.9582001068487553, 3.8002426327645855, 3.0092695873048596]
    y_ff_sc = [1.0, 1.758341397809154, 2.529612567612253, 3.278394947803721, 4.0317159016129755, 4.524395798066748, 4.630694670159049, 5.477832549327061, 5.698069680697249, 5.6872802245508165, 5.705058320484365, 5.620743609485524, 5.668397511261589, 6.3540317786069425, 6.680954304738137, 6.664171289611975, 7.129788041890756, 7.100855384902033, 6.668973740087758, 6.124193879436722, 4.990255623238065, 5.6898854268956, 5.2297524460362546, 4.542375117292552, 3.878124095874796, 3.1203033303970136, 3.7692686013435073, 3.066835327840415, 2.3997885680487023, 2.3169305729438188, 2.048523101855647, 1.7282914623206236]
    plt.plot(x_nw, y_std_sc, "k:", label="STD Threads scalability")
    plt.plot(x_nw, y_ff_sc, "k--", label="FastFlow scalability")
    plt.legend(loc="upper left")
    plt.show()
